[
null,
{"id":1,"list":[{"code":355,"indent":0,"parameters":["window.playerdirection=$gamePlayer._direction/2"]},{"code":111,"indent":0,"parameters":[12,"$gameActors.actor(1).hp<=1"]},{"code":111,"indent":1,"parameters":[12,"window.playerdead==false"]},{"code":250,"indent":2,"parameters":[{"name":"Damage3","volume":90,"pitch":100,"pan":0}]},{"code":355,"indent":2,"parameters":["window.playerdead=true"]},{"code":223,"indent":2,"parameters":[[0,0,0,255],60,false]},{"code":205,"indent":2,"parameters":[-1,{"list":[{"code":37,"indent":null},{"code":39,"indent":null},{"code":0}],"repeat":false,"skippable":false,"wait":true}]},{"code":505,"indent":2,"parameters":[{"code":37,"indent":null}]},{"code":505,"indent":2,"parameters":[{"code":39,"indent":null}]},{"code":355,"indent":2,"parameters":["worker.postMessage(\"dead:\"+(playerid-1000))"]},{"code":355,"indent":2,"parameters":["$gameActors.actor(1).addParam(0, -($gameActors.actor(1).mhp-1));"]},{"code":655,"indent":2,"parameters":["$gameActors.actor(1).addParam(0, 99);"]},{"code":655,"indent":2,"parameters":["$gameActors.actor(1).addParam(1, -($gameActors.actor(1).mmp-1));"]},{"code":655,"indent":2,"parameters":["$gameActors.actor(1).addParam(1, 99);"]},{"code":655,"indent":2,"parameters":["document.getElementById('shieldpic').style.visibility='hidden'"]},{"code":655,"indent":2,"parameters":["$gameMap._interpreter.pluginCommand(\"PlayerLantern\", [ \"OFF\" ]);"]},{"code":355,"indent":2,"parameters":["$gameParty.gainGold(Number($gameParty.gold()*-1))"]},{"code":235,"indent":2,"parameters":[100]},{"code":126,"indent":2,"parameters":[1,1,0,1]},{"code":126,"indent":2,"parameters":[2,1,0,1]},{"code":126,"indent":2,"parameters":[3,1,0,1]},{"code":126,"indent":2,"parameters":[4,1,0,1]},{"code":126,"indent":2,"parameters":[6,1,0,1]},{"code":126,"indent":2,"parameters":[5,1,0,1]},{"code":126,"indent":2,"parameters":[7,1,0,1]},{"code":314,"indent":2,"parameters":[0,0]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":111,"indent":0,"parameters":[12,"resetsignal===1"]},{"code":223,"indent":1,"parameters":[[0,0,0,0],60,false]},{"code":355,"indent":1,"parameters":["window.playerdead==true"]},{"code":205,"indent":1,"parameters":[-1,{"list":[{"code":38,"indent":null},{"code":40,"indent":null},{"code":0}],"repeat":false,"skippable":false,"wait":false}]},{"code":505,"indent":1,"parameters":[{"code":38,"indent":null}]},{"code":505,"indent":1,"parameters":[{"code":40,"indent":null}]},{"code":111,"indent":1,"parameters":[12,"$gameMap._mapId==1"]},{"code":355,"indent":2,"parameters":["var possibleX=[26,13,43,42,62,63,79,96,89,74,73,86,65,54,53,41,39,44,26,51,51,48]"]},{"code":655,"indent":2,"parameters":["var possibleY=[11,27,10,28,16,29,24,22,36,41,51,58,68,56,73,64,50,37,38,28,80,91]"]},{"code":655,"indent":2,"parameters":["var arindex=Math.floor(Math.random() * possibleY.length)"]},{"code":655,"indent":2,"parameters":[""]},{"code":655,"indent":2,"parameters":["$gamePlayer.reserveTransfer(1,possibleX[arindex],possibleY[arindex],2,2);"]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":355,"indent":1,"parameters":["$gameActors.actor(1).addParam(0, -($gameActors.actor(1).mhp-1));"]},{"code":655,"indent":1,"parameters":["$gameActors.actor(1).addParam(0, 99);"]},{"code":655,"indent":1,"parameters":["$gameActors.actor(1).addParam(1, -($gameActors.actor(1).mmp-1));"]},{"code":655,"indent":1,"parameters":["$gameActors.actor(1).addParam(1, 99);"]},{"code":655,"indent":1,"parameters":["document.getElementById('shieldpic').style.visibility='hidden'"]},{"code":655,"indent":1,"parameters":["$gameMap._interpreter.pluginCommand(\"PlayerLantern\", [ \"OFF\" ]);"]},{"code":355,"indent":1,"parameters":["$gameParty.gainGold(Number($gameParty.gold()*-1))"]},{"code":235,"indent":1,"parameters":[100]},{"code":126,"indent":1,"parameters":[1,1,0,1]},{"code":126,"indent":1,"parameters":[2,1,0,1]},{"code":126,"indent":1,"parameters":[3,1,0,1]},{"code":126,"indent":1,"parameters":[4,1,0,1]},{"code":126,"indent":1,"parameters":[6,1,0,1]},{"code":126,"indent":1,"parameters":[5,1,0,1]},{"code":126,"indent":1,"parameters":[7,1,0,1]},{"code":314,"indent":1,"parameters":[0,0]},{"code":355,"indent":1,"parameters":["window.playerdead=false"]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":111,"indent":0,"parameters":[12,"currentselected==1"]},{"code":111,"indent":1,"parameters":[8,2]},{"code":231,"indent":2,"parameters":[100,"Weapon",0,0,20,560,100,100,255,0]},{"code":0,"indent":2,"parameters":[]},{"code":411,"indent":1,"parameters":[]},{"code":111,"indent":2,"parameters":[8,4]},{"code":231,"indent":3,"parameters":[100,"staff",0,0,20,560,100,100,255,0]},{"code":0,"indent":3,"parameters":[]},{"code":411,"indent":2,"parameters":[]},{"code":235,"indent":3,"parameters":[100]},{"code":0,"indent":3,"parameters":[]},{"code":412,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":411,"indent":0,"parameters":[]},{"code":111,"indent":1,"parameters":[12,"currentselected==2"]},{"code":111,"indent":2,"parameters":[8,1]},{"code":231,"indent":3,"parameters":[100,"potion",0,0,20,560,100,100,255,0]},{"code":0,"indent":3,"parameters":[]},{"code":411,"indent":2,"parameters":[]},{"code":111,"indent":3,"parameters":[8,5]},{"code":231,"indent":4,"parameters":[100,"mppotion",0,0,20,560,100,100,255,0]},{"code":0,"indent":4,"parameters":[]},{"code":411,"indent":3,"parameters":[]},{"code":235,"indent":4,"parameters":[100]},{"code":0,"indent":4,"parameters":[]},{"code":412,"indent":3,"parameters":[]},{"code":0,"indent":3,"parameters":[]},{"code":412,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":411,"indent":1,"parameters":[]},{"code":111,"indent":2,"parameters":[12,"currentselected==3"]},{"code":111,"indent":3,"parameters":[8,6]},{"code":231,"indent":4,"parameters":[100,"buildtool",0,0,20,560,100,100,255,0]},{"code":0,"indent":4,"parameters":[]},{"code":411,"indent":3,"parameters":[]},{"code":111,"indent":4,"parameters":[8,7]},{"code":231,"indent":5,"parameters":[100,"sword",0,0,20,560,100,100,255,0]},{"code":0,"indent":5,"parameters":[]},{"code":411,"indent":4,"parameters":[]},{"code":235,"indent":5,"parameters":[100]},{"code":0,"indent":5,"parameters":[]},{"code":412,"indent":4,"parameters":[]},{"code":0,"indent":4,"parameters":[]},{"code":412,"indent":3,"parameters":[]},{"code":0,"indent":3,"parameters":[]},{"code":412,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"spawn","switchId":4999,"trigger":2},
{"id":2,"list":[{"code":111,"indent":0,"parameters":[8,2]},{"code":355,"indent":1,"parameters":["worker.postMessage(\"arrow:\"+$gamePlayer._x+\":\"+$gamePlayer._y+\":\"+playerid+\":\"+playerdirection)"]},{"code":655,"indent":1,"parameters":["weapondelay=333"]},{"code":655,"indent":1,"parameters":["setTimeout(()=>{"]},{"code":655,"indent":1,"parameters":["weapondelay=0"]},{"code":655,"indent":1,"parameters":["},weapondelay)"]},{"code":0,"indent":1,"parameters":[]},{"code":411,"indent":0,"parameters":[]},{"code":111,"indent":1,"parameters":[8,4]},{"code":111,"indent":2,"parameters":[12,"$gameActors.actor(1).mp >= 15"]},{"code":355,"indent":3,"parameters":["worker.postMessage(\"magic:\"+$gamePlayer._x+\":\"+$gamePlayer._y+\":\"+playerid+\":\"+playerdirection)"]},{"code":655,"indent":3,"parameters":["weapondelay=1000"]},{"code":655,"indent":3,"parameters":["setTimeout(()=>{"]},{"code":655,"indent":3,"parameters":["weapondelay=0"]},{"code":655,"indent":3,"parameters":["},weapondelay)"]},{"code":312,"indent":3,"parameters":[0,0,1,0,15]},{"code":0,"indent":3,"parameters":[]},{"code":412,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"weapon","switchId":1,"trigger":0},
{"id":3,"list":[{"code":111,"indent":0,"parameters":[8,6]},{"code":355,"indent":1,"parameters":["if(0==usingmenu){usingmenu=!0;var tempplayerdirection=playerdirection;choices=[],params=[],$gameMessage.setChoices(choices,0),choices.push(\"Block\"),choices.push(\"Spikes\"),choices.push(\"Portal Entrance\"),choices.push(\"Portal Exit\"),choices.push(\"Door\"),choices.push(\"Crystal\"),choices.push(\"Close\"),params.push(),$gameMessage.setChoiceCallback(function(e){0==e&&worker.postMessage(\"build:\"+tempplayerdirection+\":11\"),usingmenu=!1,1==e&&worker.postMessage(\"build:\"+tempplayerdirection+\":12\"),usingmenu=!1,2==e&&worker.postMessage(\"build:\"+tempplayerdirection+\":13:tpEntrance:\"+playerid),usingmenu=!1,3==e&&worker.postMessage(\"build:\"+tempplayerdirection+\":14:tpExit:\"+playerid),usingmenu=!1,4==e&&(2==tempplayerdirection||3==tempplayerdirection?(worker.postMessage(\"build:\"+tempplayerdirection+\":15:doorh:\"+playerid),usingmenu=!1):(worker.postMessage(\"build:\"+tempplayerdirection+\":16:doorv:\"+playerid),usingmenu=!1)),5==e?(worker.postMessage(\"build:\"+tempplayerdirection+\":17\"),usingmenu=!1):usingmenu=!1})}"]},{"code":0,"indent":1,"parameters":[]},{"code":411,"indent":0,"parameters":[]},{"code":111,"indent":1,"parameters":[8,7]},{"code":111,"indent":2,"parameters":[12,"weapondelay==0"]},{"code":355,"indent":3,"parameters":["if(2==$gamePlayer._direction){worker.postMessage(\"animation:\"+playerid+\":4\"),worker.postMessage(\"damage:\"+playerid+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x-1)+\":\"+($gamePlayer._y+1)),worker.postMessage(\"damage:\"+playerid+\":\"+$gamePlayer._x+\":\"+($gamePlayer._y+1)),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x+1)+\":\"+($gamePlayer._y+1));for(var i=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y).length;i--;)$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]&&$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP?$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1).length;i--;)$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i]&&$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].HP?$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1).length;i--;)$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i]&&$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].HP?$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1).length;i--;)$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i]&&$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].HP?$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].y)))}else if(8==$gamePlayer._direction){worker.postMessage(\"animation:\"+playerid+\":3\"),worker.postMessage(\"damage:\"+playerid+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x-1)+\":\"+($gamePlayer._y-1)),worker.postMessage(\"damage:\"+playerid+\":\"+$gamePlayer._x+\":\"+($gamePlayer._y-1)),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x+1)+\":\"+($gamePlayer._y-1));for(i=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y).length;i--;)$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]&&$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP?$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1).length;i--;)$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i]&&$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i].HP?$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y-1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1).length;i--;)$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i]&&$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].HP?$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1).length;i--;)$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i]&&$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].HP?$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].y)))}else if(6==$gamePlayer._direction){worker.postMessage(\"animation:\"+playerid+\":1\"),worker.postMessage(\"damage:\"+playerid+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x+1)+\":\"+($gamePlayer._y+1)),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x+1)+\":\"+$gamePlayer._y),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x+1)+\":\"+($gamePlayer._y-1));for(i=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y).length;i--;)$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]&&$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP?$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1).length;i--;)$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i]&&$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].HP?$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y-1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y).length;i--;)$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i]&&$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i].HP?$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1).length;i--;)$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i]&&$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].HP?$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x+1,$gamePlayer._y+1)[i].y)))}else{worker.postMessage(\"animation:\"+playerid+\":2\"),worker.postMessage(\"damage:\"+playerid+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x-1)+\":\"+($gamePlayer._y+1)),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x-1)+\":\"+$gamePlayer._y),worker.postMessage(\"damage:\"+playerid+\":\"+($gamePlayer._x-1)+\":\"+($gamePlayer._y-1));for(i=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y).length;i--;)$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]&&$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP?$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x,$gamePlayer._y+1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1).length;i--;)$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i]&&$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].HP?$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y-1)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y).length;i--;)$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i]&&$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i].HP?$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y)[i].y)));for(i=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1).length;i--;)$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i]&&$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].HP&&0==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i]._erased&&(99==$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].HP?$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i]._direction=6:$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i]._direction=8,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].HP-=30,$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].HP<=0&&(null!=$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].ismob&&$gameParty.gainGold(30),worker.postMessage(\"destroy:\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].serverID+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].x+\":\"+$gameMap.eventsXy($gamePlayer._x-1,$gamePlayer._y+1)[i].y)))}"]},{"code":655,"indent":3,"parameters":["weapondelay=250"]},{"code":655,"indent":3,"parameters":["setTimeout(()=>{"]},{"code":655,"indent":3,"parameters":["weapondelay=0"]},{"code":655,"indent":3,"parameters":["},weapondelay)"]},{"code":0,"indent":3,"parameters":[]},{"code":412,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"Melee","switchId":1,"trigger":0},
{"id":4,"list":[{"code":135,"indent":0,"parameters":[0]},{"code":355,"indent":0,"parameters":["window.stopchecking=true"]},{"code":655,"indent":0,"parameters":["resetimgandaudio()"]},{"code":102,"indent":0,"parameters":[["Server List","Favorites","Add favorite","Options","Quit"],-1,0,0,0]},{"code":402,"indent":0,"parameters":[0,"Server List"]},{"code":355,"indent":1,"parameters":["otherchoisesopened=!0;var lista2,lista3,lista,serverr,fs=require(\"fs\");function servertest(e,r){if(currentvalue>servers.length||!0===stopchecking||!e||!r)return stopchecking=!0,clearTimeout(tempo),void(0==inevent5&&$gameTemp.reserveCommonEvent(5));serverr=new WebSocket(r),begingping=0,serverr.onopen=function(){serverr.send(\"ping\"),begingping=performance.now()},serverr.onmessage=function(s){if(s.data.startsWith(\"totalplayers:\")&&!1===stopchecking){var t=s.data;t=(t=t.split(\":\"))[1];var n=performance.now();n-=begingping,n=Math.trunc(n),s.data.split(\":\").length>2?finallistnames.push(\"[locked]\"+e+\" [\"+t+\"] [\"+n+\"ms]\"):finallistnames.push(e+\" [\"+t+\"] [\"+n+\"ms]\"),finallist.push(r)}serverr.close(),currentvalue++,servertest(servernames[currentvalue],servers[currentvalue])},serverr.onerror=function(){serverr.close(),currentvalue++,servertest(servernames[currentvalue],servers[currentvalue])}}function download(e,r,s){if(e.startsWith(\"https\"))var t=require(\"https\");else t=require(\"http\");var n=require(\"fs\"),i=n.createWriteStream(r);t.get(e,function(e){e.pipe(i),i.on(\"finish\",function(){i.close(s)}),i.on(\"error\",function(e){n.unlink(r),s&&s(e.message)})})}window.finallistnames=new Array,window.finallist=new Array,window.currentvalue=0,window.stopchecking=!1,window.tempo,window.inevent5=!1,download(\"https://raw.githubusercontent.com/elpeleq42/rpgbrservers/master/servers.txt\",\"./servers.txt\",function(e){window.servers=[],window.servernames=[],lista=(lista=(lista=fs.readFileSync(\"./servers.txt\")).toString()).split(\"\\n\"),fs.unlinkSync(\"./servers.txt\");for(var r=0;r<lista.length;r++)\"\"!==lista[r]&&(lista2=lista[r].toString().split(\"-\"),lista3=lista2[0].toString().replace(/\\s/g,\"\"),lista2=lista2[1].toString().replace(/\\s/g,\"\"),servers.push(lista2),servernames.push(lista3));tempo=setTimeout(()=>{stopchecking=!0,serverr.close(),0==inevent5&&$gameTemp.reserveCommonEvent(5)},5500),servertest(servernames[0],servers[0])});"]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[1,"Favorites"]},{"code":355,"indent":1,"parameters":["otherchoisesopened=!0;var lista2,lista3,lista,serverr,fs=require(\"fs\");function servertest(e,r){if(currentvalue>servers.length||!0===stopchecking||!e||!r)return stopchecking=!0,clearTimeout(tempo),void(0==inevent5&&$gameTemp.reserveCommonEvent(5));serverr=new WebSocket(r),begingping=0,serverr.onopen=function(){serverr.send(\"ping\"),begingping=performance.now()},serverr.onmessage=function(s){if(s.data.startsWith(\"totalplayers:\")&&!1===stopchecking){var t=s.data;t=(t=t.split(\":\"))[1];var n=performance.now();n-=begingping,n=Math.trunc(n),s.data.split(\":\").length>2?finallistnames.push(\"[locked]\"+e+\" [\"+t+\"] [\"+n+\"ms]\"):finallistnames.push(e+\" [\"+t+\"] [\"+n+\"ms]\"),finallist.push(r)}serverr.close(),currentvalue++,servertest(servernames[currentvalue],servers[currentvalue])},serverr.onerror=function(){serverr.close(),currentvalue++,servertest(servernames[currentvalue],servers[currentvalue])}}function download(e,r,s){if(e.startsWith(\"https\"))var t=require(\"https\");else t=require(\"http\");var n=require(\"fs\"),i=n.createWriteStream(r);t.get(e,function(e){e.pipe(i),i.on(\"finish\",function(){i.close(s)}),i.on(\"error\",function(e){n.unlink(r),s&&s(e.message)})})}fs.existsSync(\"./favorites.txt\")||fs.writeFileSync(\"./favorites.txt\",\"\"),window.finallistnames=new Array,window.finallist=new Array,window.currentvalue=0,window.stopchecking=!1,window.tempo,window.inevent5=!1,window.servers=[],window.servernames=[],lista=(lista=(lista=fs.readFileSync(\"./favorites.txt\")).toString()).split(\"\\n\");for(var i=0;i<lista.length;i++)\"\"!==lista[i]&&(lista3=(lista2=lista[i].toString().split(\"-\"))[0].toString().replace(/\\s/g,\"\"),lista2=lista2[1].toString().replace(/\\s/g,\"\"),servers.push(lista2),servernames.push(lista3));tempo=setTimeout(()=>{stopchecking=!0,serverr.close(),0==inevent5&&$gameTemp.reserveCommonEvent(5)},5500),servertest(servernames[0],servers[0]);"]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[2,"Add favorite"]},{"code":355,"indent":1,"parameters":["var text=prompt(\"Type a name\")"]},{"code":655,"indent":1,"parameters":["var fs=require(\"fs\")"]},{"code":655,"indent":1,"parameters":["if(text!=null){"]},{"code":655,"indent":1,"parameters":["if(fs.existsSync(\"./favorites.txt\")){"]},{"code":655,"indent":1,"parameters":["fs.appendFileSync('./favorites.txt', \"\\n\"+text);"]},{"code":655,"indent":1,"parameters":["}"]},{"code":655,"indent":1,"parameters":["else{"]},{"code":655,"indent":1,"parameters":["fs.writeFileSync(\"./favorites.txt\",text)"]},{"code":655,"indent":1,"parameters":["}"]},{"code":655,"indent":1,"parameters":["}"]},{"code":655,"indent":1,"parameters":["$gameTemp.reserveCommonEvent(4)"]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[3,"Options"]},{"code":355,"indent":1,"parameters":["setTimeout(()=>{"]},{"code":655,"indent":1,"parameters":["document.getElementById('donationbox').style.visibility=\"hidden\""]},{"code":655,"indent":1,"parameters":["SceneManager.push(Scene_Options)"]},{"code":655,"indent":1,"parameters":["$gameTemp.reserveCommonEvent(4)"]},{"code":655,"indent":1,"parameters":["},150)"]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[4,"Quit"]},{"code":355,"indent":1,"parameters":["window.close()"]},{"code":0,"indent":1,"parameters":[]},{"code":404,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"Lobby","switchId":1,"trigger":0},
{"id":5,"list":[{"code":355,"indent":0,"parameters":["window.stopchecking=true"]},{"code":655,"indent":0,"parameters":["window.inevent5=true"]},{"code":655,"indent":0,"parameters":["var fs=require(\"fs\"),previouscheck=void 0;window.serverpass=void 0;var rmdir=function(e){fs.existsSync(e)&&(fs.readdirSync(e).forEach(function(a,n){var t=e+\"/\"+a;fs.lstatSync(t).isDirectory()?rmdir(t):fs.unlinkSync(t)}),fs.rmdirSync(e))};function download(e,a,n){if(e.startsWith(\"https\"))var t=require(\"https\");else t=require(\"http\");var s=require(\"fs\"),r=s.createWriteStream(a);t.get(e,function(e){e.pipe(r),r.on(\"finish\",function(){r.close(n)}),r.on(\"error\",function(e){s.unlink(a),n&&n(e.message)})})}if(fs.existsSync(\"./www/map\")?(rmdir(\"./www/map\"),fs.mkdirSync(\"./www/map\")):fs.mkdirSync(\"./www/map\"),servers.length<1)$gameTemp.reserveCommonEvent(4);else{choices=[],params=[],$gameMessage.setChoices(choices,0),$gameMessage.setChoicePositionType(0);for(var i=0;i<finallist.length;i++)choices.push(finallistnames[i]);params.push(),choices.push(\"Back\"),$gameMessage.setChoiceCallback(function(e){var a=!1;Number(e)<finallist.length?(document.getElementById(\"loadingtext\").innerText=\"Connecting...\",setTimeout(()=>{window.join=Number(e);var n=new WebSocket(finallist[join]);n.onopen=function(){document.getElementById(\"cancelbutton\").style.visibility=\"visible\",setTimeout(()=>{n.send(\"map?\")},33)},buffermap=[],n.onmessage=function(e){if(msg=e.data,window.worker=new Worker(\"js/webworker.js\"),\"default\"===msg)a=!0,document.getElementById(\"loadingtext\").innerText=\"Loading Map...\",n.close(),require(\"nw.gui\").Window.get().focus(),$gamePlayer.reserveTransfer(1,12,15,2,2),checkmap=setInterval(()=>{1==$gameMap._mapId&&null!=$dataMap&&null!=$dataMap.scrollType&&(turnHUDonoff(),$gameTemp.reserveCommonEvent(6),document.getElementById(\"cancelbutton\").style.visibility=\"hidden\",clearInterval(checkmap))},50);else if(\"free4all\"===msg)a=!0,document.getElementById(\"loadingtext\").innerText=\"Loading Map...\",n.close(),require(\"nw.gui\").Window.get().focus(),$gamePlayer.reserveTransfer(6,12,15,2,2),checkmap=setInterval(()=>{1!=$gameMap._mapId&&6!=$gameMap._mapId||null==$dataMap||null==$dataMap.scrollType||(turnHUDonoff(),$gameTemp.reserveCommonEvent(6),document.getElementById(\"cancelbutton\").style.visibility=\"hidden\",clearInterval(checkmap))},50);else if(msg.startsWith(\"http\")){document.getElementById(\"loadingtext\").innerText=\"Downloading Map Data...\",a=!0;var t=0,s=setInterval(()=>{t=fs.statSync(\"./www/map/test.zip\").size/1048576-t,document.getElementById(\"loadingtext\").innerText=\"Downloading Map Data...\"+t.toFixed(2)+\"MBps\"},1e3);download(msg,\"./www/map/test.zip\",function(){clearInterval(s);var e=new(require(\"./js/plugins/adm-zip.js\"))(\"./www/map/test.zip\");e.getEntries();document.getElementById(\"loadingtext\").innerText=\"Extracting Map...\",setTimeout(()=>{e.extractAllToAsync(\"./www/map\",!0,function(){var e=require(\"./js/libs/ncp.js\").ncp;e.limit=20;var a=0;e(\"./www/map/img/\",\"./www/img/\",function(){a++}),e(\"./www/map/audio/\",\"./www/audio/\",function(){a++});var t=setInterval(()=>{if(a>1){clearInterval(t),fs.copyFileSync(\"./www/map/data/Map001.json\",\"./www/data/Map005.json\");var e=JSON.parse(fs.readFileSync(\"./www/map/data/MapInfos.json\"))[1];e.id=5,e.order=5,$dataMapInfos[5]=e;for(var s=JSON.parse(fs.readFileSync(\"./www/map/data/CommonEvents.json\")),r=1;r<s.length;r++)s[r].id=s[r].id+11;$dataCommonEvents=$dataCommonEvents.concat(s),$dataTilesets=JSON.parse(fs.readFileSync(\"./www/map/data/Tilesets.json\")),$dataAnimations=JSON.parse(fs.readFileSync(\"./www/map/data/Animations.json\")),$dataSystem=JSON.parse(fs.readFileSync(\"./www/map/data/System.json\")),$dataActors=JSON.parse(fs.readFileSync(\"./www/map/data/Actors.json\")),document.getElementById(\"loadingtext\").innerText=\"Loading Map...\",n.close(),require(\"nw.gui\").Window.get().focus(),$gamePlayer.reserveTransfer(5,5,3,2,2),require=void 0;var i=setInterval(()=>{5==$gameMap._mapId&&null!=$dataMap&&null!=$dataMap.scrollType&&(turnHUDonoff(),$gameTemp.reserveCommonEvent(6,!0),document.getElementById(\"cancelbutton\").style.visibility=\"hidden\",clearInterval(i))},33)}},33)})},50)})}else if(\"pass?\"!==msg)if(\"finished\"===msg){a=!0;for(var r=0;r<buffermap.length;r++)buffermap[r]=Buffer.from(buffermap[r],\"binary\");var i=Buffer.concat(buffermap);buffermap=void 0,window.gc(),fs.writeFile(\"./www/map/test.zip\",i,function(){var e=new(require(\"./js/plugins/adm-zip.js\"))(\"./www/map/test.zip\");e.getEntries();document.getElementById(\"loadingtext\").innerText=\"Extracting Map...\",setTimeout(()=>{e.extractAllToAsync(\"./www/map\",!0,function(){var e=require(\"./js/libs/ncp.js\").ncp;e.limit=20;var a=0;e(\"./www/map/img/\",\"./www/img/\",function(){a++}),e(\"./www/map/audio/\",\"./www/audio/\",function(){a++});var t=setInterval(()=>{if(a>1){clearInterval(t),fs.copyFileSync(\"./www/map/data/Map001.json\",\"./www/data/Map005.json\");var e=JSON.parse(fs.readFileSync(\"./www/map/data/MapInfos.json\"))[1];e.id=5,e.order=5,$dataMapInfos[5]=e;for(var s=JSON.parse(fs.readFileSync(\"./www/map/data/CommonEvents.json\")),r=1;r<s.length;r++)s[r].id=s[r].id+11;$dataCommonEvents=$dataCommonEvents.concat(s),$dataTilesets=JSON.parse(fs.readFileSync(\"./www/map/data/Tilesets.json\")),$dataAnimations=JSON.parse(fs.readFileSync(\"./www/map/data/Animations.json\")),$dataSystem=JSON.parse(fs.readFileSync(\"./www/map/data/System.json\")),$dataActors=JSON.parse(fs.readFileSync(\"./www/map/data/Actors.json\")),document.getElementById(\"loadingtext\").innerText=\"Loading Map...\",n.close(),require(\"nw.gui\").Window.get().focus(),$gamePlayer.reserveTransfer(5,5,3,2,2),require=void 0;var i=setInterval(()=>{5==$gameMap._mapId&&null!=$dataMap&&null!=$dataMap.scrollType&&(turnHUDonoff(),$gameTemp.reserveCommonEvent(6,!0),document.getElementById(\"cancelbutton\").style.visibility=\"hidden\",clearInterval(i))},33)}},33)})},50)})}else document.getElementById(\"loadingtext\").innerText=\"Downloading Map Data...\",null==previouscheck?(previouscheck=0,timechecker=0):(console.log(msg.length,performance.now(),timechecker),previouscheck=msg.length/((performance.now()-timechecker)/1e3)/1048576,document.getElementById(\"loadingtext\").innerText=\"Downloading Map Data...\"+previouscheck.toFixed(2)+\"MBps\"),buffermap.push(msg),timechecker=performance.now();else window.serverpass=prompt(\"Type the server password\"),n.send(serverpass)},n.onclose=function(){0==a&&(document.getElementById(\"loadingtext\").innerText=\"Error\",setTimeout(()=>{location.reload()},1250))}},50)):(document.getElementById(\"loadingtext\").innerText=\"\",$gameTemp.reserveCommonEvent(4))})}"]},{"code":655,"indent":0,"parameters":["//# sourceURL=serverlist.js"]},{"code":0,"indent":0,"parameters":[]}],"name":"ServerList","switchId":1,"trigger":0},
{"id":6,"list":[{"code":111,"indent":0,"parameters":[12,"$gameMap._mapId==1"]},{"code":356,"indent":1,"parameters":["StopPlayerMovement"]},{"code":355,"indent":1,"parameters":["window.playeridchecker=setInterval(()=>{"]},{"code":655,"indent":1,"parameters":["if(playerid!==undefined){"]},{"code":655,"indent":1,"parameters":["var possibleX=[26,13,43,42,62,63,79,96,89,74,73,86,65,54,53,41,39,44,26,51,51,48]"]},{"code":655,"indent":1,"parameters":["var possibleY=[11,27,10,28,16,29,24,22,36,41,51,58,68,56,73,64,50,37,38,28,80,91]"]},{"code":655,"indent":1,"parameters":["var arindex=Math.floor(Math.random() * possibleY.length)"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["$gamePlayer.reserveTransfer(1,possibleX[arindex],possibleY[arindex],2,2);"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["clearInterval(playeridchecker)"]},{"code":655,"indent":1,"parameters":["}"]},{"code":655,"indent":1,"parameters":["},100)"]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":111,"indent":0,"parameters":[12,"$gameMap._mapId==6"]},{"code":355,"indent":1,"parameters":["window.playeridchecker=setInterval(()=>{"]},{"code":655,"indent":1,"parameters":["if(playerid!==undefined){"]},{"code":655,"indent":1,"parameters":["var possibleX=[11,21,31,40,48,40,44,58,69,60,52,58,68,12,77,8,8,12,3,21,26,26,37,44,39,37,57]"]},{"code":655,"indent":1,"parameters":["var possibleY=[8,6,8,9,15,29,36,43,19,9,59,68,62,65,77,29,36,43,45,45,39,25,45,42,53,63,28]"]},{"code":655,"indent":1,"parameters":["var arindex=Math.floor(Math.random() * possibleY.length)"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["$gamePlayer.reserveTransfer(6,possibleX[arindex],possibleY[arindex],2,2);"]},{"code":655,"indent":1,"parameters":[""]},{"code":655,"indent":1,"parameters":["clearInterval(playeridchecker)"]},{"code":655,"indent":1,"parameters":["}"]},{"code":655,"indent":1,"parameters":["},100)"]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":211,"indent":0,"parameters":[1]},{"code":121,"indent":0,"parameters":[4999,4999,0]},{"code":355,"indent":0,"parameters":["document.getElementById('loadingtext').innerText = \"\""]},{"code":655,"indent":0,"parameters":["window.usingmenu=false"]},{"code":355,"indent":0,"parameters":["var update,lastID=0,contadordeeventos=1,eventmaxcounter=0,lantern=!1,$enemieskilled=-1;window.playerdirection,window.resetsignal=0,window.playerid=void 0,window.ping=0,window.coordinates,worker.onmessage=function(e){if(\"connected\"==(update=(update=e.data).split(\":\"))&&(intervalo=setInterval(()=>{null!=playerid&&$gamePlayer._direction!==previousdirection&&(worker.postMessage(\"rotation:\"+playerid+\":\"+$gamePlayer._direction),previousdirection=$gamePlayer._direction)},32),window.connectedtotheserver=!0,lastping=!0),update[0].startsWith(\"id\"))playerid=1e3+Number(update[1]),Yanfly.SpawnEventAt1(2,20,$gamePlayer._x,$gamePlayer._y,!0,\"\",\"\");else if(update[0].startsWith(\"update\")){if(null==playerid)return;if(Number(update[1])+1e3!==playerid){$gameMap.event(Number(update[1])+1e3)._canPlayFootsteps=\"true\"==update[4];var a=$gameMap.event(Number(update[1])+1e3);if(update[2]+\":\"+update[3]==a._x+\":\"+a._y)return;if((a._x-Number(update[2]))*(a._x-Number(update[2]))>4||a._y-Number(update[3])*a._y-Number(update[3])>4)return void a.setPosition(Number(update[2]),Number(update[3]));a._x>Number(update[2])?a._y>Number(update[3])?a.moveDiagonally(4,8):a._y<Number(update[3])?a.moveDiagonally(4,2):a.moveDiagonally(4,0):a._x<Number(update[2])?a._y<Number(update[3])?a.moveDiagonally(6,2):a._y>Number(update[3])?a.moveDiagonally(6,8):a.moveDiagonally(6,0):a._y<Number(update[3])?a._x>Number(update[2])?a.moveDiagonally(4,2):$gameMap.event(Number(update[1])+1e3)._x<Number(update[2])?a.moveDiagonally(6,2):a.moveDiagonally(0,2):a._x>Number(update[2])?a.moveDiagonally(4,8):a._x<Number(update[2])?a.moveDiagonally(6,8):a.moveDiagonally(0,8)}else Number(update[1])+1e3==playerid&&(($gamePlayer._x-Number(update[2]))*($gamePlayer._x-Number(update[2]))>4||($gamePlayer._y-Number(update[3]))*($gamePlayer._y-Number(update[3]))>4)&&$gamePlayer.reserveTransfer(5,Number(update[2]),Number(update[3]),2,1)}else if(update[0].startsWith(\"eventid\"))void 0!==playerid&&Number(update[1])+1e3!==playerid&&$gameSelfSwitches.setValue([$gameMap._mapId,1e3+Number(update[1]),\"A\"],!1);else if(update[0].startsWith(\"movemob\")){for(var t=1999;t<$gameMap._events.length;t++)if($gameMap._events[t]&&$gameMap._events[t].serverID&&$gameMap._events[t].serverID==update[1]){var r=0,n=0;Number(update[2])>$gameMap._events[t]._x?r=6:Number(update[2])<$gameMap._events[t]._x&&(r=4),Number(update[3])>$gameMap._events[t]._y?n=2:Number(update[3])<$gameMap._events[t]._y&&(n=8),update[2]==$gameMap._events[t]._x&&update[3]==$gameMap._events[t]._y&&worker.postMessage(\"confirmed:\"+update[1]+\":\"+update[2]+\":\"+update[3]),$gamePlayer.canPassDiagonally($gameMap._events[t]._x,$gameMap._events[t]._y,r,n)&&Math.abs(Number(update[2])-$gameMap._events[t]._x)+Math.abs(Number(update[3])-$gameMap._events[t]._y)<2?($gameMap.event(t).moveDiagonally(n,r),worker.postMessage(\"confirmed:\"+update[1]+\":\"+update[2]+\":\"+update[3])):Math.abs(Number(update[2])-$gameMap._events[t]._x)+Math.abs(Number(update[3])-$gameMap._events[t]._y)>2?worker.postMessage(\"denied:\"+update[1]+\":\"+($gameMap._heightMap[0].length+1)+\":\"+($gameMap._heightMap.length+1)):worker.postMessage(\"denied:\"+update[1]+\":\"+update[2]+\":\"+update[3])}}else if(update[0].startsWith(\"spawn\"))Number(update[1])==playerid&&1==window.playerdead&&(window.playerdead=!1,$gameActors.actor(1).addParam(0,99),$gameActors.actor(1).addParam(1,99),$gamePlayer._through=!1,$gamePlayer._transparent=!1),$gameMap.event(Number(update[1]))?$gameMap.event(Number(update[1]))&&($gameMap.event(Number(update[1])).mynameis=\"[\"+(Number(update[1])-1e3)+\"]\"+update[2],$gameSelfSwitches.setValue([$gameMap._mapId,Number(update[1]),\"A\"],!1)):eventmaxcounter<1e3&&(Yanfly.SpawnEventAt(2,1,5,5,!0,\"[\"+(Number(update[1])-1e3)+\"]\"+update[2]),eventmaxcounter++);else if(update[0].startsWith(\"selfswitch\"))$gameSelfSwitches.setValue([$gameMap._mapId,Number(update[1]),update[2]],\"true\"==update[3]);else if(update[0].startsWith(\"arrow\"))Yanfly.SpawnEventAt1(2,3,Number(update[1]),Number(update[2]),!0,\"\",Number(update[4])),$gameMap.event(1999+lastspawnedabove100).playerwhospawned=Number(update[3]);else if(update[0].startsWith(\"build\"))Yanfly.SpawnEventAt1(2,Number(update[3]),Number(update[1]),Number(update[2]),!0,\"\",\"\"),$gameMap.event(1999+lastspawnedabove100).serverID=Number(update[4]),$gameMap.event(1999+lastspawnedabove100).HP=99,\"tpExit\"==update[5]?$gameMap.event(1999+lastspawnedabove100).tpExit=Number(update[6]):\"tpEntrance\"==update[5]?$gameMap.event(1999+lastspawnedabove100).tpEntrance=Number(update[6]):\"mob\"==update[5]&&($gameMap.event(1999+lastspawnedabove100).ismob=!0);else if(update[0].startsWith(\"magic\"))Yanfly.SpawnEventAt1(2,2,Number(update[1]),Number(update[2]),!0,\"\",Number(update[4])),$gameMap.event(1999+lastspawnedabove100).playerwhospawned=Number(update[3]);else if(update[0].startsWith(\"damage\"))$gamePlayer._x==update[2]&&$gamePlayer._y==update[3]&&playerid!=Number(update[1])&&$gameParty.members()[0].gainHp(-25);else if(\"dead\"===update[0]){if(!$gameMap.event(1e3+Number(update[1])))return;$gameSelfSwitches.setValue([$gameMap._mapId,1e3+Number(update[1]),\"A\"],!0),$gameMap.event(1e3+Number(update[1])).bitmap.clear(),SceneManager._scene.removeChild($gameMap.event(1e3+Number(update[1])).sprite)}else if(update[0].startsWith(\"roundstarted\"))1==$gameMap._mapId&&($gameMap._interpreter.pluginCommand(\"AllowPlayerMovement\",[]),$gamePlayer.reserveTransfer(5,$gamePlayer._x,$gamePlayer._y,2,1),$gameMessage.add(\"The round has already started. Wait for the next.\")),$gameParty.members().forEach(function(e){e.setHp(1)});else if(update[0].startsWith(\"chest\"))Yanfly.SpawnEventAt1(2,Number(update[1]),Number(update[2]),Number(update[3]),!0,\"\",\"\"),$gameMap.event(1999+lastspawnedabove100).serverID=Number(update[4]);else if(update[0].startsWith(\"begin\"))$gamePlayer.reserveTransfer($gameMap.mapId(),$gamePlayer._x,$gamePlayer._y,2,1),chatopen=!1,document.getElementById(\"txtarea\")&&document.getElementById(\"chatInput\")&&(document.getElementById(\"txtarea\").style.visibility=\"visible\",document.getElementById(\"txtarea\").style.overflowY=\"hidden\",document.getElementById(\"txtarea\").style.background=\"\",document.getElementById(\"chatInput\").style.visibility=\"hidden\"),1!=$gameMap._mapId&&6!=$gameMap._mapId&&7!=$gameMap._mapId||$gameMessage.add(\"The game began!\\\\|\\\\^\"),$gameMap._interpreter.pluginCommand(\"AllowPlayerMovement\",[]),resetsignal=0,$gameTimer.start(18050);else if(update[0].startsWith(\"reset\")){chatopen=!1,document.getElementById(\"txtarea\")&&document.getElementById(\"chatInput\")&&(document.getElementById(\"txtarea\").style.visibility=\"visible\",document.getElementById(\"txtarea\").style.overflowY=\"hidden\",document.getElementById(\"txtarea\").style.background=\"\",document.getElementById(\"chatInput\").style.visibility=\"hidden\"),resetsignal=1,$enemieskilled=-1,1==$gameMap._mapId&&setTimeout(()=>{$gameMessage.add(\"Reseting match!\\\\|\\\\|\\\\^\")},100),setTimeout(()=>{resetsignal=0,window.playerdead=!1},1e3);for(t=$gameMap._events.length-1;t>=999;t--)$gameMap._events[t].ismob&&1==$gameMap._events[t].ismob&&$gameMap.eraseEvent($gameMap.event(t)._eventId)}else if(update[0].startsWith(\"gamewillbegin\"))chatopen=!1,document.getElementById(\"txtarea\")&&document.getElementById(\"chatInput\")&&(document.getElementById(\"txtarea\").style.visibility=\"visible\",document.getElementById(\"txtarea\").style.overflowY=\"hidden\",document.getElementById(\"txtarea\").style.background=\"\",document.getElementById(\"chatInput\").style.visibility=\"hidden\"),1==$gameMap._mapId&&setTimeout(()=>{$gameMessage.add(\"The game will begin in 3 seconds!\\\\|\\\\|\\\\^\")},100);else if(\"checked\"===update[0])window.receivedping=!0,ping=Number(update[1]);else if(\"receivegold\"===update[0])$enemieskilled++,$gameParty.gainGold(Number(update[1]));else if(\"flashlight\"===update[0]&&$gameMap.event(Number(update[1]))&&0==$gameMap.event(Number(update[1]))._erased)$gameMap.event(Number(update[1])).callKhasCommand(\"light\",update[2]);else if(\"message\"===update[0])update.shift(),$gameMessage.add(update.join(\":\"));else if(\"through\"===update[0]){var s=Number(update[1]);$gameMap._events[s]._through=\"true\"==update[2]}else if(\"rotation\"===update[0])$gameMap.event(Number(update[1]))&&0==$gameMap.event(Number(update[1]))._erased&&($gameMap.event(Number(update[1]))._direction=Number(update[2]));else if(\"animation\"==update[0])Number(update[1])==playerid?$gamePlayer.requestAnimation(Number(update[2])):$gameMap.event(Number(update[1]))&&0==$gameMap.event(Number(update[1]))._erased&&$gameMap.event(Number(update[1])).requestAnimation(Number(update[2]));else if(\"destroy\"===update[0])for(t=0;t<$gameMap.eventsXy(Number(update[2]),Number(update[3])).length;t++)$gameMap.eventsXy(Number(update[2]),Number(update[3]))[t].serverID==update[1]&&$gameMap.eraseEvent($gameMap.eventsXy(Number(update[2]),Number(update[3]))[t]._eventId);else if(\"chat\"===update[0]){var p=document.getElementById(\"txtarea\"),m=document.createElement(\"div\"),d=document.createElement(\"span\"),i=document.createElement(\"span\");if(d.style.color=\"#c92cac\",i.style.color=\"#000000\",i.style.textShadow=\"-1px 0 rgba(230, 230, 230, 0.25), 0 1px rgba(230, 230, 230, 0.25), 1px 0 rgba(230, 230, 230, 0.25), 0 -1px rgba(230, 230, 230, 0.25)\",d.style.textShadow=\"-1px 0 rgba(230, 230, 230, 0.25), 0 1px rgba(230, 230, 230, 0.25), 1px 0 rgba(230, 230, 230, 0.25), 0 -1px rgba(230, 230, 230, 0.25)\",\"\"!==update[1]){if(d.textContent=update[1]+\": \",\"true\"==localStorage.texttospeech){var u=new SpeechSynthesisUtterance;u.lang=\"en-US\",u.text=update[1]+\" has said:\"+update[2],window.speechSynthesis.speak(u)}}else d.textContent=\"\";d.whiteSpace=\"pre-wrap\",i.whiteSpace=\"pre-wrap\",d.style.wordWrap=\"break-word\",i.style.wordWrap=\"break-word\",i.textContent=update.slice(2,update.length).join(\":\"),m&&(m.appendChild(d),m.appendChild(i)),chatHistory.push([d,i]),p&&(p.appendChild(m),p.scrollTop=p.scrollHeight)}else if(\"tpevent\"===update[0]){if(null==playerid)return;Number(update[3])==playerid?$gamePlayer.reserveTransfer($gameMap._mapId,Number(update[1]),Number(update[2]),$gamePlayer._direction,2,!0):$gameMap.event(Number(update[3])).setPosition(Number(update[1]),Number(update[2]))}else if(\"tpmob\"===update[0])for(t=$gameMap._events.length-1;t>=0;t--)$gameMap._events[t]&&$gameMap._events[t].serverID&&$gameMap._events[t].serverID==update[1]&&$gameMap.event(t).setPosition(Number(update[2]),Number(update[3]));else if(\"server\"===update[0]){if(update=(update=update.splice(1,update.length)).join(\":\"),void 0!==server)try{server.onmessage(update)}catch(e){}}else\"closed\"==update&&(connectedtotheserver=!1,$gameMessage.add(\"Connection lost.\\\\|\\\\|\\\\^\"),setTimeout(()=>{worker.terminate(),location.reload()},2200))},localStorage.myname||(localStorage.myname=\"Player\"),serverpass?worker.postMessage(\"connectto:\"+finallist[join]+\":\"+serverpass):worker.postMessage(\"connectto:\"+finallist[join]),fetch(\"http://jsonip.com/?callback=\").then(e=>e.json()).then(e=>{var a=String(localStorage.myname);worker.postMessage(\"name:\"+a.replace(/:/g,\"\")+\":\"+e.ip)}).catch(()=>{}),previousdirection=$gamePlayer._direction,currentselected=1,document.onmousedown=function(e){1==e.which&&SceneManager._scene instanceof Scene_Menu==0&&(1==currentselected&&0===weapondelay&&!1===chatopen&&$gameTemp.reserveCommonEvent(2,!0),2==currentselected&&!1===chatopen&&$gameTemp.reserveCommonEvent(7,!0),3==currentselected&&!1===chatopen&&$gameTemp.reserveCommonEvent(3,!0))};var checkfire=!1,checkdrop=!1,$tab=void 0,keyconfig_alias=Scene_Map.prototype.updateScene;Scene_Map.prototype.updateScene=function(){var e;keyconfig_alias.call(this);for(var a=2e3;a>=1e3;a--)$gameMap.event(a)&&(e=$gameMap.event(a)).mynameis&&1!=e._erased&&(e.bitmap&&$gameMap.event(a).bitmap.clear(),e.sprite&&SceneManager._scene.removeChild($gameMap.event(a).sprite),1!==e._pageIndex&&((e._x-$gamePlayer._x)*(e._x-$gamePlayer._x)+(e._y-$gamePlayer._y)*(e._y-$gamePlayer._y)>900||($gameMap.event(a).bitmap=new Bitmap(120,40),$gameMap.event(a).bitmap.outlineWidth=2,$gameMap.event(a).bitmap.fontSize=14,$gameMap.event(a).bitmap.drawText($gameMap.event(a).mynameis,0,0,120,40,\"center\"),$gameMap.event(a).sprite=new Sprite($gameMap.event(a).bitmap),$gameMap.event(a).sprite.z=20,$gameMap.event(a).sprite.setFrame(0,0,Graphics.boxWidth,Graphics.boxHeight),SceneManager._scene.addChild($gameMap.event(a).sprite),$gameMap.event(a).sprite.x=e.screenX()-60,$gameMap.event(a).sprite.y=e.screenY()-80)));if($tab&&($tab.clear(),SceneManager._scene.removeChild($tabs),$tab=void 0),SceneManager.isSceneChanging()||!Input.isTriggered(\"tab\")&&!Input.isPressed(\"tab\")||$tab||(($tab=new Bitmap(250,200)).fillAll(\"black\"),$tabs=new Sprite($tab),$tabs.x=5,$tabs.y=5,$tabs.alpha=.5,$tab.fontSize=22,$tab.drawText(\"Name:\"+localStorage.myname+\"   ID:\"+(playerid-1e3),9,140,200,.5,\"left\"),$tab.drawText(\"Enemies Killed:\"+$enemieskilled,9,165,200,.5,\"left\"),SceneManager._scene.addChild($tabs)),0==$gamePlayer.isMoving()&&0==chatopen&&0==$gameMessage.isBusy())if(Input.isPressed(\"up\")&&$gamePlayer.canPass($gamePlayer._x,$gamePlayer._y,8)){var t=$gamePlayer._x,r=$gamePlayer._y-1;Input.isPressed(\"left\")&&!Input.isPressed(\"right\")&&$gamePlayer.canPass($gamePlayer._x,$gamePlayer._y-1,4)?t-=1:Input.isPressed(\"right\")&&!Input.isPressed(\"left\")&&$gamePlayer.canPass($gamePlayer._x,$gamePlayer._y-1,6)&&(t+=1),worker.postMessage(\"sendposition:\"+t+\":\"+r+\":\"+$gamePlayer.isDashing())}else if(Input.isPressed(\"down\")&&$gamePlayer.canPass($gamePlayer._x,$gamePlayer._y,2)){t=$gamePlayer._x,r=$gamePlayer._y+1;Input.isPressed(\"left\")&&!Input.isPressed(\"right\")&&$gamePlayer.canPass($gamePlayer._x,$gamePlayer._y+1,4)?t-=1:Input.isPressed(\"right\")&&!Input.isPressed(\"left\")&&$gamePlayer.canPass($gamePlayer._x,$gamePlayer._y+1,6)&&(t+=1),worker.postMessage(\"sendposition:\"+t+\":\"+r+\":\"+$gamePlayer.isDashing())}else if(Input.isPressed(\"left\")&&$gamePlayer.canPass($gamePlayer._x,$gamePlayer._y,4)){t=$gamePlayer._x-1,r=$gamePlayer._y;Input.isPressed(\"up\")&&!Input.isPressed(\"down\")&&$gamePlayer.canPass($gamePlayer._x-1,$gamePlayer._y,8)?r-=1:Input.isPressed(\"down\")&&!Input.isPressed(\"up\")&&$gamePlayer.canPass($gamePlayer._x-1,$gamePlayer._y,2)&&(r+=1),worker.postMessage(\"sendposition:\"+t+\":\"+r+\":\"+$gamePlayer.isDashing())}else if(Input.isPressed(\"right\")&&$gamePlayer.canPass($gamePlayer._x,$gamePlayer._y,6)){t=$gamePlayer._x+1,r=$gamePlayer._y;Input.isPressed(\"up\")&&!Input.isPressed(\"down\")&&$gamePlayer.canPass($gamePlayer._x+1,$gamePlayer._y,8)?r-=1:Input.isPressed(\"down\")&&!Input.isPressed(\"up\")&&$gamePlayer.canPass($gamePlayer._x+1,$gamePlayer._y,2)&&(r+=1),worker.postMessage(\"sendposition:\"+t+\":\"+r+\":\"+$gamePlayer.isDashing())}if(!SceneManager.isSceneChanging()&&3!=$gameMap._mapId){if((Input.isTriggered(\"menu\")||Input.isTriggered(\"escape\"))&&(!1===escmenu&&0==checkdrop&&0==checkfire&&!1===chatopen&&!1===otherchoisesopened&&SceneManager._scene instanceof Scene_Options==!1&&SceneManager._scene instanceof Scene_Menu==!1&&($gameTemp.reserveCommonEvent(11,!0),escmenu=!0),escpressed=!0),Input.isPressed(\"fire\")&&(checkfire=!0,null==n))var n=setTimeout(()=>{Input.isPressed(\"fire\")||(checkfire=!1),n=void 0},500);if(Input.isPressed(\"drop\")&&(0==Input.isControllerConnected()&&!1===chatopen&&(1==currentselected&&$gameTemp.reserveCommonEvent(8,!0),2==currentselected&&$gameTemp.reserveCommonEvent(10,!0),3==currentselected&&$gameTemp.reserveCommonEvent(9,!0)),checkdrop=!0,null==s))var s=setTimeout(()=>{Input.isPressed(\"drop\")||(checkdrop=!1),s=void 0},500);Input.isTriggered(\"weapon\")&&(currentselected=1),Input.isTriggered(\"potion\")&&(currentselected=2),Input.isTriggered(\"shield\")&&(currentselected=3),1==checkfire&&Input.isTriggered(\"ok\")?0===weapondelay&&!1===chatopen&&$gameTemp.reserveCommonEvent(2,!0):1==checkfire&&Input.isTriggered(\"cancel\")&&!1===chatopen?$gameTemp.reserveCommonEvent(7,!0):1==checkfire&&Input.isTriggered(\"menu\")&&!1===chatopen?$gameTemp.reserveCommonEvent(3,!0):1==checkdrop&&Input.isTriggered(\"ok\")&&!1===chatopen?$gameTemp.reserveCommonEvent(8,!0):1==checkdrop&&Input.isTriggered(\"cancel\")&&!1===chatopen?$gameTemp.reserveCommonEvent(10,!0):1==checkdrop&&Input.isTriggered(\"menu\")&&!1===chatopen?$gameTemp.reserveCommonEvent(9,!0):(Input.isTriggered(\"lantern\")||1==checkfire&&Input.isTriggered(\"shift\"))&&!1===chatopen&&(!1===lantern?(lantern=!0,$gameMap._interpreter.pluginCommand(\"PlayerLantern\",[\"flashlight\"]),worker.postMessage(\"flashlight:\"+playerid+\":flashlight\")):(lantern=!1,$gameMap._interpreter.pluginCommand(\"PlayerLantern\",[\"OFF\"]),worker.postMessage(\"flashlight:\"+playerid+\":OFF\")))}},setInterval(()=>{0==$gamePlayer.isMoving()&&worker.postMessage(\"sendposition:\"+$gamePlayer._x+\":\"+$gamePlayer._y+\":false\")},200);"]},{"code":355,"indent":0,"parameters":["$gameTemp.reserveCommonEvent(1,true)"]},{"code":222,"indent":0,"parameters":[]},{"code":121,"indent":0,"parameters":[5000,5000,1]},{"code":135,"indent":0,"parameters":[0]},{"code":214,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"client","switchId":5000,"trigger":1},
{"id":7,"list":[{"code":111,"indent":0,"parameters":[8,1]},{"code":355,"indent":1,"parameters":["worker.postMessage(\"animation:\"+playerid+\":5\") "]},{"code":126,"indent":1,"parameters":[1,1,0,1]},{"code":311,"indent":1,"parameters":[0,0,0,0,50,false]},{"code":235,"indent":1,"parameters":[100]},{"code":0,"indent":1,"parameters":[]},{"code":411,"indent":0,"parameters":[]},{"code":111,"indent":1,"parameters":[8,5]},{"code":355,"indent":2,"parameters":["worker.postMessage(\"animation:\"+playerid+\":6\") "]},{"code":126,"indent":2,"parameters":[5,1,0,1]},{"code":312,"indent":2,"parameters":[0,0,0,0,50]},{"code":235,"indent":2,"parameters":[100]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"potion","switchId":1,"trigger":0},
{"id":8,"list":[{"code":111,"indent":0,"parameters":[8,2]},{"code":126,"indent":1,"parameters":[2,1,0,1]},{"code":355,"indent":1,"parameters":["worker.postMessage(\"chest:\"+4+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y)"]},{"code":235,"indent":1,"parameters":[100]},{"code":0,"indent":1,"parameters":[]},{"code":411,"indent":0,"parameters":[]},{"code":111,"indent":1,"parameters":[8,4]},{"code":126,"indent":2,"parameters":[4,1,0,1]},{"code":355,"indent":2,"parameters":["worker.postMessage(\"chest:\"+7+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y)"]},{"code":235,"indent":2,"parameters":[100]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"dropweapon","switchId":1,"trigger":0},
{"id":9,"list":[{"code":111,"indent":0,"parameters":[8,6]},{"code":126,"indent":1,"parameters":[6,1,0,1]},{"code":355,"indent":1,"parameters":["worker.postMessage(\"chest:\"+9+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y)"]},{"code":235,"indent":1,"parameters":[100]},{"code":0,"indent":1,"parameters":[]},{"code":411,"indent":0,"parameters":[]},{"code":111,"indent":1,"parameters":[8,7]},{"code":126,"indent":2,"parameters":[7,1,0,1]},{"code":355,"indent":2,"parameters":["worker.postMessage(\"chest:\"+10+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y)"]},{"code":235,"indent":2,"parameters":[100]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"dropmelee","switchId":1,"trigger":0},
{"id":10,"list":[{"code":111,"indent":0,"parameters":[8,1]},{"code":126,"indent":1,"parameters":[1,1,0,1]},{"code":355,"indent":1,"parameters":["worker.postMessage(\"chest:\"+6+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y)"]},{"code":111,"indent":1,"parameters":[8,1]},{"code":0,"indent":2,"parameters":[]},{"code":411,"indent":1,"parameters":[]},{"code":235,"indent":2,"parameters":[100]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":411,"indent":0,"parameters":[]},{"code":111,"indent":1,"parameters":[8,5]},{"code":126,"indent":2,"parameters":[5,1,0,1]},{"code":355,"indent":2,"parameters":["worker.postMessage(\"chest:\"+8+\":\"+$gamePlayer._x+\":\"+$gamePlayer._y)"]},{"code":111,"indent":2,"parameters":[8,5]},{"code":0,"indent":3,"parameters":[]},{"code":411,"indent":2,"parameters":[]},{"code":235,"indent":3,"parameters":[100]},{"code":0,"indent":3,"parameters":[]},{"code":412,"indent":2,"parameters":[]},{"code":0,"indent":2,"parameters":[]},{"code":412,"indent":1,"parameters":[]},{"code":0,"indent":1,"parameters":[]},{"code":412,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"dropheal","switchId":1,"trigger":0},
{"id":11,"list":[{"code":355,"indent":0,"parameters":["usingmenu=true"]},{"code":102,"indent":0,"parameters":[["Resume","Exit"],-1,0,1,0]},{"code":402,"indent":0,"parameters":[0,"Resume"]},{"code":355,"indent":1,"parameters":["escmenu=false"]},{"code":655,"indent":1,"parameters":["escpressed=false"]},{"code":655,"indent":1,"parameters":["usingmenu=false"]},{"code":0,"indent":1,"parameters":[]},{"code":402,"indent":0,"parameters":[1,"Exit"]},{"code":235,"indent":1,"parameters":[100]},{"code":355,"indent":1,"parameters":["turnHUDonoff();"]},{"code":655,"indent":1,"parameters":["worker.postMessage(\"close\")"]},{"code":0,"indent":1,"parameters":[]},{"code":404,"indent":0,"parameters":[]},{"code":0,"indent":0,"parameters":[]}],"name":"exitButton","switchId":5,"trigger":0}
]